<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NINESOFT - نظام إدارة الفنادق</title> 
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ============================================
           المتغيرات الأساسية
        ============================================ */
        :root {
            --primary: #1e3a8a;
            --primary-light: #3b82f6;
            --primary-gradient: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%);
            --secondary: #f59e0b;
            --secondary-light: #fcd34d;
            --secondary-gradient: linear-gradient(135deg, #f59e0b 0%, #fcd34d 100%);
            --dark: #1f2937;
            --light: #f9fafb;
            --glass: rgba(255, 255, 255, 0.15);
            --sparkle: rgba(255, 255, 255, 0.8);
            --transition: all 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            --shadow-soft: 0 8px 32px rgba(31, 38, 135, 0.15);
            --shadow-hard: 0 4px 30px rgba(0, 0, 0, 0.2);
            --glow: 0 0 15px rgba(59, 130, 246, 0.7);
        }


        /* ============================================
           الخلفية الحية المتحركة
        ============================================ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, var(--primary-light), transparent 30%),
                radial-gradient(circle at 80% 70%, var(--secondary-light), transparent 30%);
            opacity: 0.15;
            z-index: -1;
            animation: bgPulse 15s infinite alternate;
        }

        @keyframes bgPulse {
            0% { opacity: 0.1; }
            100% { opacity: 0.25; }
        }

        /* ============================================
           تأثير الزجاج الشفاف
        ============================================ */
        .glass-effect {
            background: var(--glass);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: var(--shadow-soft);
        }

        /* ============================================
           الشريط الجانبي
        ============================================ */
        .sidebar {
            width: 300px;
            background: var(--primary-gradient);
            transform: translateX(0);
            transition: var(--transition);
            z-index: 1000;
            box-shadow: 10px 0 30px rgba(30, 58, 138, 0.3);
            position: relative;
            overflow: hidden;
        }

        .sidebar.hidden {
            transform: translateX(-100%);
            box-shadow: none;
        }

        .sidebar::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                transparent 45%,
                var(--sparkle) 50%,
                transparent 55%
            );
            opacity: 0;
            transform: rotate(30deg);
            transition: all 1s ease;
            pointer-events: none;
        }

        .sidebar:hover::after {
            animation: sparkle 2s ease;
        }

        @keyframes sparkle {
            0% { opacity: 0; transform: translateY(-100%) rotate(30deg); }
            50% { opacity: 0.6; }
            100% { opacity: 0; transform: translateY(100%) rotate(30deg); }
        }

        .sidebar-item {
            padding: 1rem 1.5rem;
            margin: 0.5rem 1rem;
            border-radius: 0.75rem;
            color: white;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .sidebar-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.6s ease;
        }

        .sidebar-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(8px);
        }

        .sidebar-item:hover::before {
            left: 100%;
        }

        .sidebar-item.active {
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }


        /* ============================================
           بطاقات الإحصائيات - تأثير 3D
        ============================================ */
        .stat-card {
            background: white;
            border-radius: 1rem;
            overflow: hidden;
            transition: var(--transition);
            transform-style: preserve-3d;
            perspective: 1000px;
            box-shadow: var(--shadow-soft);
            position: relative;
        }

        .stat-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary-gradient);
            opacity: 0;
            transition: var(--transition);
            z-index: -1;
        }

        .stat-card:hover {
            transform: translateY(-10px) rotateX(5deg);
            color: white;
            box-shadow: var(--shadow-hard);
        }

        .stat-card:hover::after {
            opacity: 1;
        }

        /* ============================================
           بطاقات الغرف - تأثيرات متقدمة
        ============================================ */
        .room-card {
            transition: var(--transition);
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: var(--shadow-soft);
            position: relative;
        }

        .room-card::before {
            content: '★';
            position: absolute;
            color: var(--secondary-light);
            font-size: 1.2rem;
            opacity: 0;
            transition: all 0.5s ease;
        }

        .room-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        .room-card:hover::before {
            animation: starDrop 1s ease forwards, starFade 1s 1s ease forwards;
        }

        @keyframes starDrop {
            0% { 
                top: -20px; 
                left: random(100) + px;
                opacity: 0;
                transform: scale(0.5);
            }
            100% { 
                top: random(80) + 10 + px; 
                left: random(100) + px;
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes starFade {
            100% { opacity: 0; }
        }

        .room-image-container {
            height: 200px;
            overflow: hidden;
        }

        .hotel-image {
            height: 100%;
            width: 100%;
            object-fit: cover;
            transition: transform 0.8s ease;
        }

        .room-card:hover .hotel-image {
            transform: scale(1.1) rotate(1deg);
        }

        /* ============================================
           الأزرار - تأثيرات تفاعلية
        ============================================ */
        .action-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: all 0.7s ease;
        }

        .action-btn:hover::before {
            left: 100%;
        }

        .click-effect:active {
            transform: scale(0.95);
            box-shadow: 0 0 20px var(--secondary-light);
        }

        /* ============================================
           تأثير البطاقات العائمة
        ============================================ */
        @keyframes floatCard {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .featured-card {
            animation: floatCard 6s ease-in-out infinite;
            box-shadow: 0 10px 30px rgba(30, 58, 138, 0.3);
        }

        /* ============================================
           الإشعارات النابضة
        ============================================ */
        .notification-badge {
            top: -10px;
            right: -10px;
            width: 24px;
            height: 24px;
            background: var(--secondary-gradient);
            animation: pulse 1.5s infinite, float 3s infinite ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* ============================================
           العملة العراقية
        ============================================ */
        .currency-iqd {
            position: relative;
            padding-left: 1.8rem;
            font-weight: 700;
            color: var(--dark);
        }

        .currency-iqd::before {
            content: "د.ع";
            position: absolute;
            left: 0;
            font-size: 0.9em;
            color: var(--primary);
            transition: var(--transition);
        }

        .currency-iqd:hover::before {
            transform: scale(1.2);
            color: var(--secondary);
        }

        /* ============================================
           صورة العميل
        ============================================ */
        .customer-avatar {
            width: 48px;
            height: 48px;
            border: 3px solid white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
        }

        .customer-avatar:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            border-color: var(--secondary);
        }

        /* ============================================
           الوضع الليلي
        ============================================ */
        .dark-mode {
            background: #0f172a;
            color: white;
        }

        .dark-mode .stat-card {
            background: #1e293b;
            color: white;
        }

        /* ============================================
           مؤشر التحميل السحري
        ============================================ */
        .loading-spinner {
            border: 3px solid rgba(59, 130, 246, 0.2);
            border-top: 3px solid var(--primary-light);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            position: relative;
        }

        .loading-spinner::after {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border: 3px solid rgba(245, 158, 11, 0.2);
            border-top: 3px solid var(--secondary);
            border-radius: 50%;
            animation: spinReverse 1.5s linear infinite;
        }

        @keyframes spin {
            100% { transform: rotate(360deg); }
        }

        @keyframes spinReverse {
            100% { transform: rotate(-360deg); }
        }

        /* ============================================
           تأثيرات التحميل المتدرجة
        ============================================ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fadeIn {
            animation: fadeIn 0.6s forwards;
        }

        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }
    </style>
</head>
<body class="bg-gray-50 font-sans text-gray-800">
    <div id="app" class="flex h-screen overflow-hidden">

        <!-- ============================================
             الشريط الجانبي
        ============================================ -->
        <div class="sidebar w-64 flex-shrink-0 fixed lg:relative h-full z-20 text-white">
            <div class="p-4 border-b border-blue-700 flex items-center justify-between">
                <h1 class="text-xl font-bold flex items-center">
                    <i class="fas fa-hotel ml-2 text-blue-300"></i>
                    <span class="text-white">NINESOFT</span>
                </h1>
                <button @click="toggleSidebar" class="text-white lg:hidden">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <nav class="mt-4">
                <a href="#" @click="changeView('dashboard')" :class="{'active': currentView === 'dashboard'}" class="sidebar-item flex items-center p-3 text-white rounded-r-lg mx-2">
                    <i class="fas fa-tachometer-alt ml-2 text-blue-300"></i>
                    لوحة التحكم
                </a>
                <a href="#" @click="changeView('hotels')" :class="{'active': currentView === 'hotels'}" class="sidebar-item flex items-center p-3 text-white rounded-r-lg mx-2">
                    <i class="fas fa-hotel ml-2 text-blue-300"></i>
                    الفنادق
                </a>
                <a href="#" @click="changeView('rooms')" :class="{'active': currentView === 'rooms'}" class="sidebar-item flex items-center p-3 text-white rounded-r-lg mx-2">
                    <i class="fas fa-bed ml-2 text-blue-300"></i>
                    الغرف
                </a>
                <a href="#" @click="changeView('reservations')" :class="{'active': currentView === 'reservations'}" class="sidebar-item flex items-center p-3 text-white rounded-r-lg mx-2">
                    <i class="fas fa-calendar-check ml-2 text-blue-300"></i>
                    الحجوزات
                </a>
                <a href="#" @click="changeView('customers')" :class="{'active': currentView === 'customers'}" class="sidebar-item flex items-center p-3 text-white rounded-r-lg mx-2">
                    <i class="fas fa-users ml-2 text-blue-300"></i>
                    العملاء
                </a>
                <a href="#" @click="changeView('tasks')" :class="{'active': currentView === 'tasks'}" class="sidebar-item flex items-center p-3 text-white rounded-r-lg mx-2">
                    <i class="fas fa-tasks ml-2 text-blue-300"></i>
                    المهام
                </a>
                <a href="#" @click="changeView('reports')" :class="{'active': currentView === 'reports'}" class="sidebar-item flex items-center p-3 text-white rounded-r-lg mx-2">
                    <i class="fas fa-chart-bar ml-2 text-blue-300"></i>
                    التقارير
                </a>
            </nav>
            <div class="absolute bottom-0 w-full p-4 border-t border-blue-700">
                <div class="flex items-center">
                    <img class="h-10 w-10 rounded-full object-cover border-2 border-blue-400" src="https://randomuser.me/api/portraits/men/32.jpg" alt="User">
                    <div class="mr-3">
                        <p class="text-sm font-medium text-white">مدير النظام</p>
                        <p class="text-xs text-blue-300">Admin</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================
             المحتوى الرئيسي
        ============================================ -->
        <div class="flex-1 flex flex-col overflow-hidden lg:mr-64 lg:ml-0">
            <!-- ============================================
                 شريط التنقل العلوي
            ============================================ -->
            <header class="bg-white shadow-sm z-10">
                <div class="flex items-center justify-between p-4">
                    <div class="flex items-center">
                        <button @click="toggleSidebar" class="text-gray-500 focus:outline-none lg:hidden mr-2">
                            <i class="fas fa-bars text-xl"></i>
                        </button>
                        <h2 class="text-xl font-semibold text-gray-800 mr-3">{{ getCurrentViewTitle() }}</h2>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <button @click="toggleNotifications" class="text-gray-500 focus:outline-none relative">
                                <i class="fas fa-bell text-xl"></i>
                                <span v-if="unreadNotifications.length > 0" class="notification-badge absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">
                                    {{ unreadNotifications.length }}
                                </span>
                            </button>
                            <!-- قائمة الإشعارات -->
                            <div v-if="showNotifications" class="absolute right-0 mt-2 w-80 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200">
                                <div class="px-4 py-2 border-b border-gray-200 flex justify-between items-center">
                                    <p class="text-sm font-medium text-gray-700">الإشعارات</p>
                                    <button @click="markAllAsRead" class="text-xs text-blue-600 hover:text-blue-800">تحديد الكل كمقروء</button>
                                </div>
                                <div class="max-h-64 overflow-y-auto">
                                    <div v-for="notification in unreadNotifications" :key="notification.id" class="px-4 py-3 hover:bg-gray-50 border-b border-gray-100">
                                        <div class="flex items-start">
                                            <div class="flex-shrink-0 pt-0.5">
                                                <i :class="`fas ${notification.icon} text-${notification.color}-500`"></i>
                                            </div>
                                            <div class="mr-3">
                                                <p class="text-sm text-gray-700">{{ notification.message }}</p>
                                                <p class="text-xs text-gray-500 mt-1">{{ formatTimeAgo(notification.date) }}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div v-if="unreadNotifications.length === 0" class="px-4 py-4 text-center">
                                        <p class="text-sm text-gray-500">لا توجد إشعارات جديدة</p>
                                    </div>
                                </div>
                                <div class="px-4 py-2 border-t border-gray-200 text-center">
                                    <a href="#" @click="changeView('notifications')" class="text-xs text-blue-600 hover:text-blue-800">عرض جميع الإشعارات</a>
                                </div>
                            </div>
                        </div>
                        <div class="relative">
                            <button @click="toggleUserMenu" class="flex items-center focus:outline-none">
                                <img class="h-8 w-8 rounded-full object-cover border-2 border-blue-400" src="https://randomuser.me/api/portraits/men/32.jpg" alt="User">
                                <span class="mr-2 text-gray-700 hidden md:inline">مدير النظام</span>
                                <i class="fas fa-chevron-down text-xs text-gray-500"></i>
                            </button>
                            <div v-if="showUserMenu" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200">
                                <a href="#" @click="changeView('profile')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center">
                                    <i class="fas fa-user ml-2 text-gray-500"></i>
                                    <span>الملف الشخصي</span>
                                </a>
                                <a href="#" @click="changeView('settings')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center">
                                    <i class="fas fa-cog ml-2 text-gray-500"></i>
                                    <span>الإعدادات</span>
                                </a>
                                <a href="#" @click="logout" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center">
                                    <i class="fas fa-sign-out-alt ml-2 text-gray-500"></i>
                                    <span>تسجيل الخروج</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- ============================================
                 محتوى الصفحة الرئيسية
            ============================================ -->
            <main class="flex-1 overflow-y-auto p-4 md:p-6 bg-gray-50">
                
                <!-- ========================================
                     عرض لوحة التحكم (Dashboard)
                ======================================== -->
                <div v-if="currentView === 'dashboard'" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div v-for="(stat, index) in stats" :key="stat.title" 
                             class="stat-card bg-white p-6 rounded-lg shadow hover:shadow-md transition-shadow"
                             :class="{'animated': statsAnimated[index]}" @load="animateStat(index)">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full" :class="stat.bgColor">
                                    <i :class="stat.icon" :class="stat.iconColor"></i>
                                </div>
                                <div class="mr-3">
                                    <p class="text-gray-500">{{ stat.title }}</p>
                                    <h3 class="text-2xl font-bold">{{ stat.value }}</h3>
                                    <p class="text-xs mt-1" :class="stat.trendColor">
                                        <i :class="stat.trendIcon"></i> {{ stat.trendValue }} عن الشهر الماضي
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- المخططات الإحصائية -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow lg:col-span-2">
                            <h3 class="text-lg font-semibold mb-4">الإيرادات الشهرية</h3>
                            <div class="h-64">
                                <canvas id="revenueChart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow">
                            <h3 class="text-lg font-semibold mb-4">نسبة الإشغال</h3>
                            <div class="h-64 flex items-center justify-center">
                                <div class="relative w-48 h-48">
                                    <div class="absolute inset-0 rounded-full border-8 border-gray-200 flex items-center justify-center">
                                        <div class="text-center">
                                            <p class="text-3xl font-bold text-blue-600">75%</p>
                                            <p class="text-gray-500">إشغال اليوم</p>
                                        </div>
                                    </div>
                                    <div class="absolute inset-0 rounded-full border-8 border-transparent border-t-blue-500 border-r-blue-500 transform -rotate-45"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- أحدث الحجوزات والمهام -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow">
                            <h3 class="text-lg font-semibold mb-4">أحدث الحجوزات</h3>
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">رقم الحجز</th>
                                            <th class="px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">اسم العميل</th>
                                            <th class="px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">تاريخ</th>
                                            <th class="px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">الحالة</th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white divide-y divide-gray-200">
                                        <tr v-for="reservation in recentReservations" :key="reservation.id" class="hover:bg-gray-50">
                                            <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-500">#{{ reservation.id }}</td>
                                            <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-500">{{ reservation.customer }}</td>
                                            <td class="px-4 py-2 whitespace-nowrap text-sm text-gray-500">{{ reservation.date }}</td>
                                            <td class="px-4 py-2 whitespace-nowrap">
                                                <span :class="`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${reservation.status === 'confirmed' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}`">
                                                    {{ reservation.status === 'confirmed' ? 'مؤكد' : 'قيد الانتظار' }}
                                                </span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="mt-4 text-center">
                                <a href="#" @click="changeView('reservations')" class="text-sm text-blue-600 hover:text-blue-800">عرض جميع الحجوزات</a>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow">
                            <h3 class="text-lg font-semibold mb-4">المهام العاجلة</h3>
                            <div class="space-y-3">
                                <div v-for="task in urgentTasks" :key="task.id" class="border border-gray-200 rounded p-3 hover:border-blue-300 transition-colors">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h4 class="font-medium">{{ task.title }}</h4>
                                            <p class="text-sm text-gray-600 mt-1">{{ task.description }}</p>
                                        </div>
                                        <span class="text-xs px-2 py-1 rounded" :class="{
                                            'bg-blue-100 text-blue-800': task.priority === 'low',
                                            'bg-yellow-100 text-yellow-800': task.priority === 'medium',
                                            'bg-red-100 text-red-800': task.priority === 'high'
                                        }">
                                            {{ task.priority === 'low' ? 'منخفض' : task.priority === 'medium' ? 'متوسط' : 'عالي' }}
                                        </span>
                                    </div>
                                    <div class="mt-3 flex justify-between items-center">
                                        <span class="text-xs text-gray-500">
                                            <i class="far fa-clock ml-1"></i> {{ task.dueDate }}
                                        </span>
                                        <button @click="updateTaskStatus(task.id, 'done')" class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded hover:bg-green-200">
                                            تم الإكمال
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-4 text-center">
                                <a href="#" @click="changeView('tasks')" class="text-sm text-blue-600 hover:text-blue-800">عرض جميع المهام</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ========================================
                     عرض الفنادق (Hotels)
                ======================================== -->
                <div v-if="currentView === 'hotels'" class="space-y-6">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0">
                        <h2 class="text-2xl font-semibold">إدارة الفنادق</h2>
                        <div class="flex space-x-3">
                            <div class="relative w-64">
                                <input type="text" v-model="hotelSearch" placeholder="بحث..." class="w-full px-4 py-2 border border-gray-300 rounded pl-10">
                                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                            </div>
                            <button @click="showAddHotelModal = true" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center">
                                <i class="fas fa-plus ml-2"></i> إضافة فندق
                            </button>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow overflow-hidden">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">اسم الفندق</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">الموقع</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">عدد الغرف</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">الحالة</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">إجراءات</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr v-for="hotel in filteredHotels" :key="hotel.id" class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 h-10 w-10">
                                                <img class="h-10 w-10 rounded-full object-cover" :src="hotel.image" alt="">
                                            </div>
                                            <div class="mr-4">
                                                <div class="text-sm font-medium text-gray-900">{{ hotel.name }}</div>
                                                <div class="text-sm text-gray-500">{{ getHotelType(hotel.type) }}</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ hotel.location }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ hotel.rooms }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span :class="`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${hotel.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`">
                                            {{ hotel.status === 'active' ? 'نشط' : 'غير نشط' }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <div class="flex space-x-3">
                                            <button @click="editHotel(hotel)" class="text-blue-600 hover:text-blue-900 flex items-center">
                                                <i class="fas fa-edit ml-1"></i> تعديل
                                            </button>
                                            <button @click="deleteHotel(hotel.id)" class="text-red-600 hover:text-red-900 flex items-center">
                                                <i class="fas fa-trash ml-1"></i> حذف
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ========================================
                     عرض الغرف (Rooms) مع دعم الطوابق
                ======================================== -->
                <div v-if="currentView === 'rooms'" class="space-y-6">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0">
                        <h2 class="text-2xl font-semibold">إدارة الغرف</h2>
                        <div class="flex space-x-3">
                            <div class="relative w-64">
                                <input type="text" v-model="roomSearch" placeholder="بحث..." class="w-full px-4 py-2 border border-gray-300 rounded pl-10">
                                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                            </div>
                            <button @click="showAddRoomModal = true" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center">
                                <i class="fas fa-plus ml-2"></i> إضافة غرفة
                            </button>
                        </div>
                    </div>

                    <!-- فلتر حسب الطابق -->
                    <div class="bg-white p-4 rounded-lg shadow">
                        <div class="flex flex-wrap gap-2">
                            <button 
                                v-for="floor in availableFloors" 
                                :key="floor"
                                @click="toggleFloorFilter(floor)"
                                :class="`px-3 py-1 rounded ${floorFilters.includes(floor) ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-800'}`"
                            >
                                الطابق {{ floor }}
                            </button>
                            <button 
                                @click="clearFloorFilters"
                                class="px-3 py-1 rounded bg-gray-100 text-gray-800 hover:bg-gray-200"
                            >
                                عرض الكل
                            </button>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        <div v-for="room in filteredRooms" :key="room.id" class="room-card bg-white rounded-lg shadow overflow-hidden hover:shadow-lg transition-shadow">
                            <div class="relative">
                                <img class="w-full h-48 object-cover" :src="room.image" alt="Room">
                                <div class="absolute top-2 left-2 bg-white px-2 py-1 rounded text-sm font-semibold shadow currency-iqd">
                                    {{ formatCurrency(room.price) }}
                                </div>
                                <div class="absolute top-2 right-2 flex flex-col items-end">
                                    <span class="px-2 py-1 rounded text-xs font-semibold shadow bg-blue-100 text-blue-800 mb-1">
                                        الطابق {{ room.floor }}
                                    </span>
                                    <span :class="`px-2 py-1 rounded text-xs font-semibold shadow ${room.status === 'available' ? 'bg-green-100 text-green-800' : room.status === 'maintenance' ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800'}`">
                                        {{ room.status === 'available' ? 'متاحة' : room.status === 'maintenance' ? 'صيانة' : 'محجوزة' }}
                                    </span>
                                </div>
                            </div>
                            <div class="p-4">
                                <h3 class="text-lg font-semibold">غرفة {{ room.number }} - {{ getRoomType(room.type) }}</h3>
                                <p class="text-gray-600 mt-1 text-sm">{{ room.description }}</p>
                                <div class="mt-3 flex flex-wrap gap-2">
                                    <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded flex items-center">
                                        <i class="fas fa-user-friends ml-1"></i> {{ room.capacity }} أشخاص
                                    </span>
                                    <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded flex items-center">
                                        <i class="fas fa-ruler-combined ml-1"></i> {{ room.size }} م²
                                    </span>
                                    <span v-if="room.view" class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded flex items-center">
                                        <i class="fas fa-eye ml-1"></i> {{ room.view }}
                                    </span>
                                </div>
                                <div class="mt-4 flex justify-between">
                                    <button @click="editRoom(room)" class="text-blue-600 hover:text-blue-800 flex items-center">
                                        <i class="fas fa-edit ml-1"></i> تعديل
                                    </button>
                                    <button @click="deleteRoom(room.id)" class="text-red-600 hover:text-red-800 flex items-center">
                                        <i class="fas fa-trash ml-1"></i> حذف
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ========================================
                     عرض الحجوزات (Reservations)
                ======================================== -->
                <div v-if="currentView === 'reservations'" class="space-y-6">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0">
                        <h2 class="text-2xl font-semibold">إدارة الحجوزات</h2>
                        <div class="flex space-x-3">
                            <div class="relative w-64">
                                <input type="text" v-model="reservationSearch" placeholder="بحث..." class="w-full px-4 py-2 border border-gray-300 rounded pl-10">
                                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                            </div>
                            <button @click="showAddReservationModal = true" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center">
                                <i class="fas fa-plus ml-2"></i> حجز جديد
                            </button>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-200 flex flex-col md:flex-row justify-between items-start md:items-center space-y-3 md:space-y-0">
                            <div class="flex space-x-2 overflow-x-auto pb-2 md:pb-0">
                                <button v-for="filter in reservationFilters" :key="filter.value" 
                                        @click="reservationFilter = filter.value"
                                        :class="`px-4 py-2 rounded text-sm ${reservationFilter === filter.value ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-800'}`">
                                    {{ filter.label }}
                                </button>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="text-sm text-gray-500">
                                    عرض <select v-model="reservationsPerPage" class="border border-gray-300 rounded px-2 py-1">
                                        <option value="10">10</option>
                                        <option value="25">25</option>
                                        <option value="50">50</option>
                                    </select> لكل صفحة
                                </div>
                                <button @click="exportReservations" class="text-sm text-green-600 hover:text-green-800 flex items-center">
                                    <i class="fas fa-file-export ml-1"></i> تصدير
                                </button>
                            </div>
                        </div>
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">رقم الحجز</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">اسم العميل</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">الفندق/الغرفة</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">التواريخ</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">الحالة</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">إجراءات</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr v-for="reservation in paginatedReservations" :key="reservation.id" class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">#{{ reservation.id }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 h-10 w-10">
                                                <img class="h-10 w-10 rounded-full object-cover" :src="reservation.customerImage" alt="">
                                            </div>
                                            <div class="mr-4">
                                                <div class="text-sm font-medium text-gray-900">{{ reservation.customerName }}</div>
                                                <div class="text-sm text-gray-500">{{ reservation.customerPhone }}</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="text-sm text-gray-900">{{ reservation.hotel }}</div>
                                        <div class="text-sm text-gray-500">غرفة {{ reservation.roomNumber }} (طابق {{ getRoomFloor(reservation.roomId) }})</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        <div>من: {{ formatDate(reservation.checkIn) }}</div>
                                        <div>إلى: {{ formatDate(reservation.checkOut) }}</div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span :class="`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${reservation.status === 'confirmed' ? 'bg-green-100 text-green-800' : reservation.status === 'cancelled' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'}`">
                                            {{ getReservationStatus(reservation.status) }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <div class="flex space-x-3">
                                            <button @click="viewReservation(reservation)" class="text-blue-600 hover:text-blue-900 flex items-center">
                                                <i class="fas fa-eye ml-1"></i> عرض
                                            </button>
                                            <button v-if="reservation.status !== 'cancelled'" @click="cancelReservation(reservation.id)" class="text-red-600 hover:text-red-900 flex items-center">
                                                <i class="fas fa-times ml-1"></i> إلغاء
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="px-6 py-4 border-t border-gray-200 flex justify-between items-center">
                            <div class="text-sm text-gray-500">
                                عرض {{ (currentReservationPage - 1) * reservationsPerPage + 1 }} إلى {{ Math.min(currentReservationPage * reservationsPerPage, filteredReservations.length) }} من {{ filteredReservations.length }} حجز
                            </div>
                            <div class="flex space-x-2">
                                <button @click="prevReservationPage" :disabled="currentReservationPage === 1" 
                                        :class="`px-3 py-1 rounded ${currentReservationPage === 1 ? 'bg-gray-100 text-gray-400 cursor-not-allowed' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`">
                                    السابق
                                </button>
                                <button v-for="page in totalReservationPages" :key="page" 
                                        @click="currentReservationPage = page"
                                        :class="`px-3 py-1 rounded ${currentReservationPage === page ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`">
                                    {{ page }}
                                </button>
                                <button @click="nextReservationPage" :disabled="currentReservationPage === totalReservationPages" 
                                        :class="`px-3 py-1 rounded ${currentReservationPage === totalReservationPages ? 'bg-gray-100 text-gray-400 cursor-not-allowed' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`">
                                    التالي
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ========================================
                     عرض العملاء (Customers)
                ======================================== -->
                <div v-if="currentView === 'customers'" class="space-y-6">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0">
                        <h2 class="text-2xl font-semibold">إدارة العملاء</h2>
                        <div class="flex space-x-3">
                            <div class="relative w-64">
                                <input type="text" v-model="customerSearch" placeholder="بحث..." class="w-full px-4 py-2 border border-gray-300 rounded pl-10">
                                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                            </div>
                            <button @click="showAddCustomerModal = true" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center">
                                <i class="fas fa-plus ml-2"></i> عميل جديد
                            </button>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow overflow-hidden">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">الاسم</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">البريد الإلكتروني</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">الهاتف</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">عدد الحجوزات</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">إجراءات</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr v-for="customer in filteredCustomers" :key="customer.id" class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 h-10 w-10">
                                                <img class="h-10 w-10 rounded-full object-cover" :src="customer.image" alt="">
                                            </div>
                                            <div class="mr-4">
                                                <div class="text-sm font-medium text-gray-900">{{ customer.name }}</div>
                                                <div class="text-sm text-gray-500">{{ customer.idNumber }}</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ customer.email }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ customer.phone }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ customer.reservations }}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <div class="flex space-x-3">
                                            <button @click="editCustomer(customer)" class="text-blue-600 hover:text-blue-900 flex items-center">
                                                <i class="fas fa-edit ml-1"></i> تعديل
                                            </button>
                                            <button @click="deleteCustomer(customer.id)" class="text-red-600 hover:text-red-900 flex items-center">
                                                <i class="fas fa-trash ml-1"></i> حذف
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ========================================
                     عرض المهام (Tasks)
                ======================================== -->
                <div v-if="currentView === 'tasks'" class="space-y-6">
                    <div class="flex justify-between items-center">
                        <h2 class="text-2xl font-semibold">إدارة المهام</h2>
                        <div class="flex space-x-3">
                            <button @click="showAddTaskModal = true" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center">
                                <i class="fas fa-plus ml-2"></i> مهمة جديدة
                            </button>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- قيد الانتظار -->
                        <div class="bg-gray-50 rounded-lg shadow task-column">
                            <div class="p-4 border-b border-gray-200">
                                <h3 class="font-semibold text-gray-700 flex items-center">
                                    <span class="w-3 h-3 bg-gray-400 rounded-full mr-2"></span>
                                    قيد الانتظار
                                    <span class="ml-auto bg-gray-200 text-gray-700 text-xs px-2 py-1 rounded-full">{{ tasks.filter(t => t.status === 'todo').length }}</span>
                                </h3>
                            </div>
                            <div class="p-4 space-y-4">
                                <div v-for="task in tasks.filter(t => t.status === 'todo')" :key="task.id" 
                                     class="bg-white p-4 rounded shadow hover:shadow-md transition-shadow cursor-move"
                                     draggable="true" @dragstart="dragStart(task.id)" @dragover.prevent>
                                    <div class="flex justify-between items-start">
                                        <h4 class="font-medium">{{ task.title }}</h4>
                                        <span class="text-xs px-2 py-1 rounded" :class="{
                                            'bg-blue-100 text-blue-800': task.priority === 'low',
                                            'bg-yellow-100 text-yellow-800': task.priority === 'medium',
                                            'bg-red-100 text-red-800': task.priority === 'high'
                                        }">
                                            {{ task.priority === 'low' ? 'منخفض' : task.priority === 'medium' ? 'متوسط' : 'عالي' }}
                                        </span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-2">{{ task.description }}</p>
                                    <div class="mt-3 flex justify-between items-center">
                                        <span class="text-xs text-gray-500">
                                            <i class="far fa-clock ml-1"></i> {{ task.dueDate }}
                                        </span>
                                        <div class="flex space-x-2">
                                            <button @click="updateTaskStatus(task.id, 'inprogress')" class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded hover:bg-blue-200">
                                                بدء التنفيذ
                                            </button>
                                            <button @click="deleteTask(task.id)" class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded hover:bg-gray-200">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div v-if="tasks.filter(t => t.status === 'todo').length === 0" class="text-center py-4 text-gray-500">
                                    لا توجد مهام في هذه القائمة
                                </div>
                            </div>
                        </div>

                        <!-- قيد التنفيذ -->
                        <div class="bg-gray-50 rounded-lg shadow task-column" 
                             @dragover.prevent @drop="drop('inprogress')">
                            <div class="p-4 border-b border-gray-200">
                                <h3 class="font-semibold text-gray-700 flex items-center">
                                    <span class="w-3 h-3 bg-yellow-400 rounded-full mr-2"></span>
                                    قيد التنفيذ
                                    <span class="ml-auto bg-gray-200 text-gray-700 text-xs px-2 py-1 rounded-full">{{ tasks.filter(t => t.status === 'inprogress').length }}</span>
                                </h3>
                            </div>
                            <div class="p-4 space-y-4">
                                <div v-for="task in tasks.filter(t => t.status === 'inprogress')" :key="task.id" 
                                     class="bg-white p-4 rounded shadow hover:shadow-md transition-shadow cursor-move"
                                     draggable="true" @dragstart="dragStart(task.id)" @dragover.prevent>
                                    <div class="flex justify-between items-start">
                                        <h4 class="font-medium">{{ task.title }}</h4>
                                        <span class="text-xs px-2 py-1 rounded" :class="{
                                            'bg-blue-100 text-blue-800': task.priority === 'low',
                                            'bg-yellow-100 text-yellow-800': task.priority === 'medium',
                                            'bg-red-100 text-red-800': task.priority === 'high'
                                        }">
                                            {{ task.priority === 'low' ? 'منخفض' : task.priority === 'medium' ? 'متوسط' : 'عالي' }}
                                        </span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-2">{{ task.description }}</p>
                                    <div class="mt-3 flex justify-between items-center">
                                        <span class="text-xs text-gray-500">
                                            <i class="far fa-clock ml-1"></i> {{ task.dueDate }}
                                        </span>
                                        <div class="flex space-x-2">
                                            <button @click="updateTaskStatus(task.id, 'done')" class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded hover:bg-green-200">
                                                إكمال
                                            </button>
                                            <button @click="deleteTask(task.id)" class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded hover:bg-gray-200">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div v-if="tasks.filter(t => t.status === 'inprogress').length === 0" class="text-center py-4 text-gray-500">
                                    لا توجد مهام في هذه القائمة
                                </div>
                            </div>
                        </div>

                        <!-- مكتمل -->
                        <div class="bg-gray-50 rounded-lg shadow task-column" 
                             @dragover.prevent @drop="drop('done')">
                            <div class="p-4 border-b border-gray-200">
                                <h3 class="font-semibold text-gray-700 flex items-center">
                                    <span class="w-3 h-3 bg-green-400 rounded-full mr-2"></span>
                                    مكتمل
                                    <span class="ml-auto bg-gray-200 text-gray-700 text-xs px-2 py-1 rounded-full">{{ tasks.filter(t => t.status === 'done').length }}</span>
                                </h3>
                            </div>
                            <div class="p-4 space-y-4">
                                <div v-for="task in tasks.filter(t => t.status === 'done')" :key="task.id" 
                                     class="bg-white p-4 rounded shadow hover:shadow-md transition-shadow cursor-move"
                                     draggable="true" @dragstart="dragStart(task.id)" @dragover.prevent>
                                    <div class="flex justify-between items-start">
                                        <h4 class="font-medium">{{ task.title }}</h4>
                                        <span class="text-xs px-2 py-1 rounded" :class="{
                                            'bg-blue-100 text-blue-800': task.priority === 'low',
                                            'bg-yellow-100 text-yellow-800': task.priority === 'medium',
                                            'bg-red-100 text-red-800': task.priority === 'high'
                                        }">
                                            {{ task.priority === 'low' ? 'منخفض' : task.priority === 'medium' ? 'متوسط' : 'عالي' }}
                                        </span>
                                    </div>
                                    <p class="text-sm text-gray-600 mt-2">{{ task.description }}</p>
                                    <div class="mt-3 flex justify-between items-center">
                                        <span class="text-xs text-gray-500">تم الإكمال: {{ task.completedDate }}</span>
                                        <button @click="deleteTask(task.id)" class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded hover:bg-gray-200">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                <div v-if="tasks.filter(t => t.status === 'done').length === 0" class="text-center py-4 text-gray-500">
                                    لا توجد مهام في هذه القائمة
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ========================================
                     عرض التقارير (Reports)
                ======================================== -->
                <div v-if="currentView === 'reports'" class="space-y-6">
                    <div class="flex justify-between items-center">
                        <h2 class="text-2xl font-semibold">التقارير والإحصائيات</h2>
                        <div class="flex space-x-3">
                            <div class="relative">
                                <select v-model="reportPeriod" class="border border-gray-300 rounded px-3 py-2">
                                    <option value="monthly">شهري</option>
                                    <option value="quarterly">ربع سنوي</option>
                                    <option value="yearly">سنوي</option>
                                </select>
                            </div>
                            <button @click="exportReport" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded flex items-center">
                                <i class="fas fa-file-export ml-2"></i> تصدير التقرير
                            </button>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow">
                            <h3 class="text-lg font-semibold mb-4">إيرادات الحجوزات</h3>
                            <div class="h-64">
                                <canvas id="bookingsRevenueChart"></canvas>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow">
                            <h3 class="text-lg font-semibold mb-4">توزيع أنواع الغرف</h3>
                            <div class="h-64">
                                <canvas id="roomTypesChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-lg font-semibold mb-4">أفضل العملاء</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">العميل</th>
                                        <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">عدد الحجوزات</th>
                                        <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">إجمالي الإنفاق</th>
                                        <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">آخر حجز</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr v-for="customer in topCustomers" :key="customer.id" class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10">
                                                    <img class="h-10 w-10 rounded-full object-cover" :src="customer.image" alt="">
                                                </div>
                                                <div class="mr-4">
                                                    <div class="text-sm font-medium text-gray-900">{{ customer.name }}</div>
                                                    <div class="text-sm text-gray-500">{{ customer.email }}</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center">{{ customer.reservations }}</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center currency-iqd">{{ formatCurrency(customer.totalSpent) }}</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ customer.lastReservation }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- ============================================
             النماذج المنبثقة (Modals)
        ============================================ -->
        
        <!-- نموذج إضافة/تعديل فندق -->
        <div v-if="showAddHotelModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
            <div class="bg-white rounded-lg w-full max-w-md">
                <div class="p-4 border-b border-gray-200 flex justify-between items-center">
                    <h3 class="text-lg font-semibold">{{ editingHotel ? 'تعديل الفندق' : 'إضافة فندق جديد' }}</h3>
                    <button @click="closeHotelModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="p-4">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">اسم الفندق</label>
                            <input type="text" v-model="newHotel.name" class="w-full px-3 py-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">الموقع</label>
                            <input type="text" v-model="newHotel.location" class="w-full px-3 py-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">النوع</label>
                            <select v-model="newHotel.type" class="w-full px-3 py-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500">
                                <option value="5_star">5 نجوم</option>
                                <option value="4_star">4 نجوم</option>
                                <option value="3_star">3 نجوم</option>
                                <option value="apartment">شقق</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">الحالة</label>
                            <select v-model="newHotel.status" class="w-full px-3 py-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500">
                                <option value="active">نشط</option>
                                <option value="inactive">غير نشط</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">صورة الفندق</label>
                            <div class="mt-1 flex items-center">
                                <span class="inline-block h-12 w-12 rounded-full overflow-hidden bg-gray-100">
                                    <img v-if="newHotel.imagePreview" :src="newHotel.imagePreview" class="h-full w-full object-cover">
                                    <svg v-else class="h-full w-full text-gray-300" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z" />
                                    </svg>
                                </span>
                                <button type="button" class="mr-3 bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                    تغيير
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-4 border-t border-gray-200 flex justify-end space-x-3">
                    <button @click="closeHotelModal" class="px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">إلغاء</button>
                    <button @click="saveHotel" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        {{ editingHotel ? 'حفظ التعديلات' : 'إضافة الفندق' }}
                    </button>
                </div>
            </div>
        </div>

        <!-- نموذج إضافة/تعديل غرفة -->
        <div v-if="showAddRoomModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
            <div class="bg-white rounded-lg w-full max-w-md">
                <div class="p-4 border-b border-gray-200 flex justify-between items-center">
                    <h3 class="text-lg font-semibold">{{ editingRoom ? 'تعديل الغرفة' : 'إضافة غرفة جديدة' }}</h3>
                    <button @click="closeRoomModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="p-4">
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">رقم الغرفة</label>
                                <input type="text" v-model="newRoom.number" class="w-full px-3 py-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">الطابق</label>
                                <input type="number" v-model="newRoom.floor" min="1" class="w-full px-3 py-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">النوع</label>
                            <select v-model="newRoom.type" class="w-full px-3 py-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500">
                                <option value="single">غرفة فردية</option>
                                <option value="double">غرفة مزدوجة</option>
                                <option value="suite">سويت</option>
                                <option value="deluxe">ديلوكس</option>
                                <option value="family">عائلية</option>
                            </select>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">السعر (د.ع)</label>
                                <input type="number" v-model="newRoom.price" class="w-full px-3 py-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">السعة</label>
                                <input type="number" v-model="newRoom.capacity" class="w-full px-3 py-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">المساحة (م²)</label>
                                <input type="number" v-model="newRoom.size" class="w-full px-3 py-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">الإطلالة</label>
                                <select v-model="newRoom.view" class="w-full px-3 py-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500">
                                    <option value="city">مدينة</option>
                                    <option value="sea">بحر</option>
                                    <option value="pool">مسبح</option>
                                    <option value="garden">حديقة</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">الحالة</label>
                            <select v-model="newRoom.status" class="w-full px-3 py-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500">
                                <option value="available">متاحة</option>
                                <option value="booked">محجوزة</option>
                                <option value="maintenance">تحت الصيانة</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">الوصف</label>
                            <textarea v-model="newRoom.description" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded focus:ring-blue-500 focus:border-blue-500"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">صور الغرفة</label>
                            <div class="mt-1 grid grid-cols-3 gap-2">
                                <div v-for="(img, index) in newRoom.images" :key="index" class="h-24 bg-gray-100 rounded overflow-hidden relative">
                                    <img v-if="img" :src="img" class="h-full w-full object-cover">
                                    <button @click="removeRoomImage(index)" class="absolute top-1 left-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center">
                                        <i class="fas fa-times text-xs"></i>
                                    </button>
                                </div>
                                <div class="h-24 border-2 border-dashed border-gray-300 rounded flex items-center justify-center cursor-pointer">
                                    <i class="fas fa-plus text-gray-400 text-xl"></i>
                                    <input type="file" class="hidden" @change="addRoomImage" multiple>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">المرافق</label>
                            <div class="grid grid-cols-2 gap-2">
                                <div v-for="facility in facilities" :key="facility.id" class="flex items-center">
                                    <input type="checkbox" :id="'facility-'+facility.id" v-model="newRoom.facilities" :value="facility.id" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                    <label :for="'facility-'+facility.id" class="mr-2 text-sm text-gray-700">{{ facility.name }}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-4 border-t border-gray-200 flex justify-end space-x-3">
                    <button @click="closeRoomModal" class="px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">إلغاء</button>
                    <button @click="saveRoom" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        {{ editingRoom ? 'حفظ التعديلات' : 'إضافة الغرفة' }}
                    </button>
                </div>
            </div>
        </div>

        <!-- نموذج عرض تفاصيل الحجز -->
        <div v-if="showViewReservationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
            <div class="bg-white rounded-lg w-full max-w-2xl">
                <div class="p-4 border-b border-gray-200 flex justify-between items-center">
                    <h3 class="text-lg font-semibold">تفاصيل الحجز #{{ viewedReservation.id }}</h3>
                    <button @click="showViewReservationModal = false" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="p-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-medium mb-3 text-blue-600">معلومات العميل</h4>
                            <div class="space-y-3">
                                <div class="flex items-center">
                                    <div class="flex-shrink-0 h-12 w-12">
                                        <img class="h-12 w-12 rounded-full object-cover" :src="viewedReservation.customerImage" alt="">
                                    </div>
                                    <div class="mr-4">
                                        <div class="text-lg font-medium text-gray-900">{{ viewedReservation.customerName }}</div>
                                        <div class="text-sm text-gray-500">{{ viewedReservation.customerPhone }}</div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <p class="text-sm text-gray-500">البريد الإلكتروني</p>
                                        <p class="font-medium">{{ viewedReservation.customerEmail || '--' }}</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">رقم الهوية</p>
                                        <p class="font-medium">{{ viewedReservation.customerId || '--' }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-medium mb-3 text-blue-600">تفاصيل الحجز</h4>
                            <div class="space-y-3">
                                <div>
                                    <p class="text-sm text-gray-500">الفندق</p>
                                    <p class="font-medium">{{ viewedReservation.hotel }}</p>
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <p class="text-sm text-gray-500">رقم الغرفة</p>
                                        <p class="font-medium">{{ viewedReservation.roomNumber }}</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">الطابق</p>
                                        <p class="font-medium">{{ getRoomFloor(viewedReservation.roomId) }}</p>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <p class="text-sm text-gray-500">تاريخ الوصول</p>
                                        <p class="font-medium">{{ formatDate(viewedReservation.checkIn) }}</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">تاريخ المغادرة</p>
                                        <p class="font-medium">{{ formatDate(viewedReservation.checkOut) }}</p>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <p class="text-sm text-gray-500">عدد الليالي</p>
                                        <p class="font-medium">{{ viewedReservation.nights }}</p>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">عدد الضيوف</p>
                                        <p class="font-medium">{{ viewedReservation.guests }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                        <h4 class="font-medium mb-3 text-blue-600">الفاتورة</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <p class="text-sm text-gray-500">سعر الغرفة</p>
                                <p class="font-medium currency-iqd">{{ formatCurrency(viewedReservation.roomPrice) }} × {{ viewedReservation.nights }} ليالي</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">الضرائب</p>
                                <p class="font-medium currency-iqd">{{ formatCurrency(viewedReservation.tax) }}</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">الإجمالي</p>
                                <p class="font-medium text-blue-600 currency-iqd">{{ formatCurrency(viewedReservation.total) }}</p>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6">
                        <h4 class="font-medium mb-3 text-blue-600">حالة الحجز</h4>
                        <div class="flex items-center">
                            <span :class="`px-3 py-1 rounded-full text-sm font-medium ${viewedReservation.status === 'confirmed' ? 'bg-green-100 text-green-800' : viewedReservation.status === 'cancelled' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'}`">
                                {{ getReservationStatus(viewedReservation.status) }}
                            </span>
                            <span class="mr-3 text-sm text-gray-500">
                                {{ viewedReservation.createdAt ? 'تم الحجز في ' + formatDateTime(viewedReservation.createdAt) : '' }}
                            </span>
                        </div>
                    </div>
                </div>
                <div class="p-4 border-t border-gray-200 flex justify-between items-center">
                    <button @click="printReservation" class="px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center">
                        <i class="fas fa-print ml-2"></i> طباعة
                    </button>
                    <div class="flex space-x-3">
                        <button v-if="viewedReservation.status !== 'cancelled'" @click="cancelViewedReservation" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 flex items-center">
                            <i class="fas fa-times ml-2"></i> إلغاء الحجز
                        </button>
                        <button @click="showViewReservationModal = false" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            إغلاق
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================
         مكتبات JavaScript الخارجية
    ============================================ -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3.2.47/dist/vue.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- ============================================
         كود Vue.js الرئيسي للتطبيق
    ============================================ -->
    <script>
        const { createApp, ref, computed, onMounted, nextTick } = Vue;

        createApp({
            setup() {
                // ========================================
                // حالة التطبيق العامة
                // ========================================
                const currentView = ref('dashboard');
                const currentUser = ref({
                    username: 'مدير النظام',
                    role: 'admin'
                });
                const showNotifications = ref(false);
                const showUserMenu = ref(false);
                const unreadNotifications = ref([
                    { id: 1, message: 'حجز جديد لغرفة 203', date: new Date(), icon: 'fa-calendar-check', color: 'blue' },
                    { id: 2, message: 'طلب صيانة لغرفة 105', date: new Date(Date.now() - 3600000), icon: 'fa-tools', color: 'yellow' },
                    { id: 3, message: 'تم إكمال مهمة تنظيف الغرف', date: new Date(Date.now() - 86400000), icon: 'fa-check-circle', color: 'green' }
                ]);

                // ========================================
                // بيانات إحصائيات لوحة التحكم
                // ========================================
                const stats = ref([
                    { title: 'عدد الفنادق', value: '5', icon: 'fas fa-hotel', bgColor: 'bg-blue-100', iconColor: 'text-blue-600', trendIcon: 'fas fa-arrow-up', trendValue: '+2', trendColor: 'text-green-600' },
                    { title: 'الغرف المشغولة', value: '24', icon: 'fas fa-bed', bgColor: 'bg-green-100', iconColor: 'text-green-600', trendIcon: 'fas fa-arrow-down', trendValue: '-3', trendColor: 'text-red-600' },
                    { title: 'الحجوزات اليوم', value: '8', icon: 'fas fa-calendar-check', bgColor: 'bg-yellow-100', iconColor: 'text-yellow-600', trendIcon: 'fas fa-arrow-up', trendValue: '+4', trendColor: 'text-green-600' },
                    { title: 'الإيرادات اليوم', value: '12,450', icon: 'fas fa-dollar-sign', bgColor: 'bg-purple-100', iconColor: 'text-purple-600', trendIcon: 'fas fa-arrow-up', trendValue: '+1,200', trendColor: 'text-green-600' }
                ]);
                const statsAnimated = ref([false, false, false, false]);

                // ========================================
                // بيانات الفنادق
                // ========================================
                const hotels = ref([
                    { id: 1, name: 'فندق الروضة', location: 'بغداد', type: '5_star', status: 'active', image: 'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80', rooms: 120 },
                    { id: 2, name: 'فندق النخيل', location: 'البصرة', type: '4_star', status: 'active', image: 'https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80', rooms: 80 },
                    { id: 3, name: 'فندق دجلة', location: 'الموصل', type: '3_star', status: 'inactive', image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80', rooms: 50 },
                    { id: 4, name: 'فندق البستان', location: 'أربيل', type: '5_star', status: 'active', image: 'https://images.unsplash.com/photo-1582719471381-971d80ea929b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80', rooms: 90 },
                    { id: 5, name: 'فندق الواحة', location: 'السليمانية', type: '4_star', status: 'active', image: 'https://images.unsplash.com/photo-1564501049412-61c2a3083791?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1632&q=80', rooms: 70 }
                ]);
                const hotelSearch = ref('');

                // ========================================
                // بيانات الغرف مع دعم الطوابق
                // ========================================
                const rooms = ref([
                    { id: 1, number: '101', floor: 1, type: 'deluxe', price: 150000, capacity: 2, size: 45, view: 'city', status: 'available', description: 'غرفة ديلوكس مع إطلالة على المدينة', image: 'https://images.unsplash.com/photo-1631049307264-da0ec9d70304?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80', facilities: [1, 3, 5] },
                    { id: 2, number: '201', floor: 2, type: 'suite', price: 250000, capacity: 4, size: 75, view: 'river', status: 'available', description: 'سويت رئاسي مع صالة استقبال', image: 'https://images.unsplash.com/photo-1582719508461-905c673771fd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1525&q=80', facilities: [1, 2, 3, 4, 5] },
                    { id: 3, number: '105', floor: 1, type: 'single', price: 80000, capacity: 1, size: 30, view: 'city', status: 'booked', description: 'غرفة فردية مريحة', image: 'https://images.unsplash.com/photo-1513694203232-719a280e022f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1469&q=80', facilities: [1, 3] },
                    { id: 4, number: '205', floor: 2, type: 'double', price: 120000, capacity: 2, size: 35, view: 'pool', status: 'available', description: 'غرفة مزدوجة مع إطلالة على المسبح', image: 'https://images.unsplash.com/photo-1566669437685-2c5a1f510d0c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80', facilities: [1, 3, 5] },
                    { id: 5, number: '301', floor: 3, type: 'family', price: 180000, capacity: 5, size: 60, view: 'garden', status: 'available', description: 'غرفة عائلية واسعة', image: 'https://images.unsplash.com/photo-1596178065887-1198b6148b2b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80', facilities: [1, 2, 3, 4, 5] },
                    { id: 6, number: '106', floor: 1, type: 'single', price: 90000, capacity: 1, size: 32, view: 'city', status: 'maintenance', description: 'غرفة فردية حديثة', image: 'https://images.unsplash.com/photo-1564078516393-cf04bd966897?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80', facilities: [1, 3] }
                ]);
                const roomSearch = ref('');
                const floorFilters = ref([]);
                const facilities = ref([
                    { id: 1, name: 'واي فاي' },
                    { id: 2, name: 'تلفزيون' },
                    { id: 3, name: 'تكييف' },
                    { id: 4, name: 'فرش إضافي' },
                    { id: 5, name: 'ميني بار' }
                ]);

                // ========================================
                // بيانات الحجوزات
                // ========================================
                const reservations = ref([
                    { id: 1, customerName: 'أحمد محمد', customerEmail: 'ahmed@example.com', customerPhone: '07701234567', customerId: '1234567890', customerImage: 'https://randomuser.me/api/portraits/men/1.jpg', hotel: 'فندق الروضة', hotelId: 1, roomNumber: '105', roomId: 3, roomType: 'single', checkIn: '2023-05-15', checkOut: '2023-05-18', nights: 3, guests: 1, status: 'confirmed', roomPrice: 80000, tax: 12000, total: 252000, createdAt: '2023-05-10T14:30:00' },
                    { id: 2, customerName: 'سارة عبدالله', customerEmail: 'sara@example.com', customerPhone: '07707654321', customerId: '0987654321', customerImage: 'https://randomuser.me/api/portraits/women/2.jpg', hotel: 'فندق النخيل', hotelId: 2, roomNumber: '201', roomId: 2, roomType: 'suite', checkIn: '2023-05-20', checkOut: '2023-05-25', nights: 5, guests: 2, status: 'pending', roomPrice: 250000, tax: 37500, total: 1287500, createdAt: '2023-05-15T10:15:00' },
                    { id: 3, customerName: 'خالد أحمد', customerEmail: 'khaled@example.com', customerPhone: '07701122334', customerId: '1122334455', customerImage: 'https://randomuser.me/api/portraits/men/3.jpg', hotel: 'فندق البستان', hotelId: 4, roomNumber: '205', roomId: 4, roomType: 'double', checkIn: '2023-05-12', checkOut: '2023-05-14', nights: 2, guests: 2, status: 'confirmed', roomPrice: 120000, tax: 18000, total: 258000, createdAt: '2023-05-05T16:45:00' },
                    { id: 4, customerName: 'نورة سعيد', customerEmail: 'nora@example.com', customerPhone: '07705566778', customerId: '5566778899', customerImage: 'https://randomuser.me/api/portraits/women/4.jpg', hotel: 'فندق الواحة', hotelId: 5, roomNumber: '301', roomId: 5, roomType: 'family', checkIn: '2023-05-18', checkOut: '2023-05-22', nights: 4, guests: 4, status: 'confirmed', roomPrice: 180000, tax: 27000, total: 747000, createdAt: '2023-05-08T09:20:00' },
                    { id: 5, customerName: 'محمد علي', customerEmail: 'mohamed@example.com', customerPhone: '07703344556', customerId: '3344556677', customerImage: 'https://randomuser.me/api/portraits/men/5.jpg', hotel: 'فندق الروضة', hotelId: 1, roomNumber: '101', roomId: 1, roomType: 'deluxe', checkIn: '2023-05-25', checkOut: '2023-05-30', nights: 5, guests: 2, status: 'pending', roomPrice: 150000, tax: 22500, total: 772500, createdAt: '2023-05-12T11:10:00' },
                    { id: 6, customerName: 'لينا خالد', customerEmail: 'lina@example.com', customerPhone: '07701122334', customerId: '2233445566', customerImage: 'https://randomuser.me/api/portraits/women/6.jpg', hotel: 'فندق دجلة', hotelId: 3, roomNumber: '106', roomId: 6, roomType: 'single', checkIn: '2023-05-10', checkOut: '2023-05-12', nights: 2, guests: 1, status: 'cancelled', roomPrice: 90000, tax: 13500, total: 193500, createdAt: '2023-05-01T13:25:00' }
                ]);
                const reservationSearch = ref('');
                const reservationFilter = ref('all');
                const reservationFilters = ref([
                    { value: 'all', label: 'الكل' },
                    { value: 'today', label: 'اليوم' },
                    { value: 'upcoming', label: 'القادمة' },
                    { value: 'past', label: 'السابقة' },
                    { value: 'confirmed', label: 'مؤكدة' },
                    { value: 'pending', label: 'قيد الانتظار' },
                    { value: 'cancelled', label: 'ملغية' }
                ]);
                const currentReservationPage = ref(1);
                const reservationsPerPage = ref(10);

                // ========================================
                // بيانات العملاء
                // ========================================
                const customers = ref([
                    { id: 1, name: 'أحمد محمد', email: 'ahmed@example.com', phone: '07701234567', idNumber: '1234567890', nationality: 'عراقي', reservations: 5, image: 'https://randomuser.me/api/portraits/men/1.jpg' },
                    { id: 2, name: 'سارة عبدالله', email: 'sara@example.com', phone: '07707654321', idNumber: '0987654321', nationality: 'عراقية', reservations: 3, image: 'https://randomuser.me/api/portraits/women/2.jpg' },
                    { id: 3, name: 'خالد أحمد', email: 'khaled@example.com', phone: '07701122334', idNumber: '1122334455', nationality: 'عراقي', reservations: 2, image: 'https://randomuser.me/api/portraits/men/3.jpg' },
                    { id: 4, name: 'نورة سعيد', email: 'nora@example.com', phone: '07705566778', idNumber: '5566778899', nationality: 'عراقية', reservations: 4, image: 'https://randomuser.me/api/portraits/women/4.jpg' },
                    { id: 5, name: 'محمد علي', email: 'mohamed@example.com', phone: '07703344556', idNumber: '3344556677', nationality: 'سوري', reservations: 1, image: 'https://randomuser.me/api/portraits/men/5.jpg' },
                    { id: 6, name: 'لينا خالد', email: 'lina@example.com', phone: '07701122334', idNumber: '2233445566', nationality: 'عراقية', reservations: 2, image: 'https://randomuser.me/api/portraits/women/6.jpg' }
                ]);
                const customerSearch = ref('');

                // ========================================
                // بيانات المهام
                // ========================================
                const tasks = ref([
                    { id: 1, title: 'تنظيف غرفة 101', description: 'تنظيف شامل للغرفة بعد مغادرة الضيوف', priority: 'medium', status: 'todo', dueDate: '2023-05-16', assignedTo: 1, assignedToName: 'محمد علي' },
                    { id: 2, title: 'إصلاح تكييف غرفة 203', description: 'التكييف لا يعمل بشكل جيد', priority: 'high', status: 'inprogress', dueDate: '2023-05-14', assignedTo: 2, assignedToName: 'خالد أحمد' },
                    { id: 3, title: 'تغيير مفروشات غرفة 105', description: 'تغيير جميع المفروشات بعد الحجز السابق', priority: 'low', status: 'done', dueDate: '2023-05-12', completedDate: '2023-05-10', assignedTo: 1, assignedToName: 'محمد علي' },
                    { id: 4, title: 'فحص نظام الأمن', description: 'فحص كاميرات المراقبة ونظام الإنذار', priority: 'high', status: 'todo', dueDate: '2023-05-18', assignedTo: 2, assignedToName: 'خالد أحمد' },
                    { id: 5, title: 'تجهيز قاعة المؤتمرات', description: 'تجهيز القاعة لاجتماع الغد', priority: 'medium', status: 'inprogress', dueDate: '2023-05-15', assignedTo: 1, assignedToName: 'محمد علي' }
                ]);
                const draggedTaskId = ref(null);

                // الموظفين
                const staffMembers = ref([
                    { id: 1, name: 'محمد علي', role: 'housekeeping' },
                    { id: 2, name: 'خالد أحمد', role: 'maintenance' },
                    { id: 3, name: 'علي حسن', role: 'reception' },
                    { id: 4, name: 'ريم عبدالله', role: 'housekeeping' }
                ]);

                // التقارير
                const reportPeriod = ref('monthly');
                const topCustomers = ref([
                    { id: 1, name: 'أحمد محمد', email: 'ahmed@example.com', reservations: 5, totalSpent: 1245000, lastReservation: '2023-05-15', image: 'https://randomuser.me/api/portraits/men/1.jpg' },
                    { id: 2, name: 'نورة سعيد', email: 'nora@example.com', reservations: 4, totalSpent: 996000, lastReservation: '2023-05-18', image: 'https://randomuser.me/api/portraits/women/4.jpg' },
                    { id: 3, name: 'سارة عبدالله', email: 'sara@example.com', reservations: 3, totalSpent: 738000, lastReservation: '2023-05-20', image: 'https://randomuser.me/api/portraits/women/2.jpg' },
                    { id: 4, name: 'خالد أحمد', email: 'khaled@example.com', reservations: 2, totalSpent: 430000, lastReservation: '2023-05-12', image: 'https://randomuser.me/api/portraits/men/3.jpg' },
                    { id: 5, name: 'لينا خالد', email: 'lina@example.com', reservations: 2, totalSpent: 375000, lastReservation: '2023-05-10', image: 'https://randomuser.me/api/portraits/women/6.jpg' }
                ]);

                // حالة النماذج
                const showAddHotelModal = ref(false);
                const showAddRoomModal = ref(false);
                const showAddReservationModal = ref(false);
                const showAddCustomerModal = ref(false);
                const showAddTaskModal = ref(false);
                const showViewReservationModal = ref(false);

                const editingHotel = ref(false);
                const editingRoom = ref(false);
                const editingReservation = ref(false);
                const editingCustomer = ref(false);
                const editingTask = ref(false);

                const newHotel = ref({ name: '', location: '', type: '5_star', status: 'active', image: '', imagePreview: '' });
                const newRoom = ref({ 
                    number: '', 
                    floor: 1, 
                    type: 'single', 
                    price: 80000, 
                    capacity: 1, 
                    size: 30, 
                    view: 'city', 
                    status: 'available', 
                    description: '', 
                    images: [], 
                    facilities: [] 
                });
                const newReservation = ref({ customerName: '', customerEmail: '', customerPhone: '', customerId: '', hotelId: '', roomId: '', checkIn: '', checkOut: '', guests: 1, notes: '' });
                const newCustomer = ref({ name: '', email: '', phone: '', idNumber: '', nationality: '', imagePreview: '' });
                const newTask = ref({ title: '', description: '', priority: 'medium', dueDate: '', assignedTo: 1, status: 'todo' });

                const viewedReservation = ref({});
                const reservationNights = ref(0);
                const reservationTotal = ref(0);
                const selectedRoomPrice = ref(0);

                // ========================================
                // الدوال المساعدة لتنسيق البيانات
                // ========================================
                
                // تنسيق العملة العراقية
                const formatCurrency = (amount) => {
                    if (!amount) return '0';
                    return new Intl.NumberFormat('ar-IQ').format(amount);
                };

                // الطوابق المتاحة
                const availableFloors = computed(() => {
                    const floors = new Set();
                    rooms.value.forEach(room => {
                        floors.add(room.floor);
                    });
                    return Array.from(floors).sort((a, b) => a - b);
                });

                // الحجوزات الحديثة
                const recentReservations = computed(() => {
                    return reservations.value.slice(0, 5).map(r => ({
                        id: r.id,
                        customer: r.customerName,
                        date: formatDate(r.checkIn),
                        status: r.status
                    }));
                });

                // المهام العاجلة
                const urgentTasks = computed(() => {
                    return tasks.value
                        .filter(t => t.status !== 'done')
                        .sort((a, b) => {
                            if (a.priority === 'high' && b.priority !== 'high') return -1;
                            if (a.priority !== 'high' && b.priority === 'high') return 1;
                            return new Date(a.dueDate) - new Date(b.dueDate);
                        })
                        .slice(0, 3);
                });

                // الفنادق المصفاة
                const filteredHotels = computed(() => {
                    let result = hotels.value;
                    
                    if (hotelSearch.value) {
                        const searchTerm = hotelSearch.value.toLowerCase();
                        result = result.filter(h => 
                            h.name.toLowerCase().includes(searchTerm) || 
                            h.location.toLowerCase().includes(searchTerm) ||
                            h.type.toLowerCase().includes(searchTerm)
                        );
                    }
                    
                    return result;
                });

                // الغرف المصفاة مع دعم فلترة الطوابق
                const filteredRooms = computed(() => {
                    let result = rooms.value;
                    
                    if (roomSearch.value) {
                        const searchTerm = roomSearch.value.toLowerCase();
                        result = result.filter(r => 
                            r.number.includes(searchTerm) || 
                            r.type.toLowerCase().includes(searchTerm) ||
                            r.description.toLowerCase().includes(searchTerm)
                        );
                    }
                    
                    if (floorFilters.value.length > 0) {
                        result = result.filter(r => floorFilters.value.includes(r.floor));
                    }
                    
                    return result;
                });

                // العملاء المصفاة
                const filteredCustomers = computed(() => {
                    let result = customers.value;
                    
                    if (customerSearch.value) {
                        const searchTerm = customerSearch.value.toLowerCase();
                        result = result.filter(c => 
                            c.name.toLowerCase().includes(searchTerm) || 
                            c.email.toLowerCase().includes(searchTerm) ||
                            c.phone.includes(searchTerm) ||
                            c.idNumber.includes(searchTerm)
                        );
                    }
                    
                    return result;
                });

                // الحجوزات المصفاة
                const filteredReservations = computed(() => {
                    let result = reservations.value;
                    
                    if (reservationFilter.value === 'today') {
                        const today = new Date().toISOString().split('T')[0];
                        result = result.filter(r => r.checkIn === today || r.checkOut === today);
                    } else if (reservationFilter.value === 'upcoming') {
                        const today = new Date().toISOString().split('T')[0];
                        result = result.filter(r => r.checkIn > today);
                    } else if (reservationFilter.value === 'past') {
                        const today = new Date().toISOString().split('T')[0];
                        result = result.filter(r => r.checkOut < today);
                    } else if (reservationFilter.value === 'confirmed') {
                        result = result.filter(r => r.status === 'confirmed');
                    } else if (reservationFilter.value === 'pending') {
                        result = result.filter(r => r.status === 'pending');
                    } else if (reservationFilter.value === 'cancelled') {
                        result = result.filter(r => r.status === 'cancelled');
                    }
                    
                    if (reservationSearch.value) {
                        const searchTerm = reservationSearch.value.toLowerCase();
                        result = result.filter(r => 
                            r.customerName.toLowerCase().includes(searchTerm) || 
                            r.roomNumber.includes(searchTerm) ||
                            r.hotel.toLowerCase().includes(searchTerm) ||
                            r.customerPhone.includes(searchTerm)
                        );
                    }
                    
                    return result.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                });

                // الحجوزات المعروضة (مع التقسيم إلى صفحات)
                const paginatedReservations = computed(() => {
                    const start = (currentReservationPage.value - 1) * reservationsPerPage.value;
                    const end = start + reservationsPerPage.value;
                    return filteredReservations.value.slice(start, end);
                });

                // إجمالي عدد صفحات الحجوزات
                const totalReservationPages = computed(() => {
                    return Math.ceil(filteredReservations.value.length / reservationsPerPage.value);
                });

                // الغرف المتاحة للحجز
                const availableRoomsForReservation = computed(() => {
                    if (!newReservation.value.hotelId || !newReservation.value.checkIn || !newReservation.value.checkOut) {
                        return [];
                    }

                    return rooms.value.filter(room => {
                        // التحقق من أن الغرفة تابعة للفندق المحدد
                        if (room.hotelId && room.hotelId != newReservation.value.hotelId) {
                            return false;
                        }

                        // التحقق من أن الغرفة متاحة
                        if (room.status !== 'available') {
                            return false;
                        }

                        // التحقق من عدم وجود حجوزات متضاربة
                        const hasConflict = reservations.value.some(reservation => {
                            return reservation.roomId === room.id && 
                                   reservation.status !== 'cancelled' &&
                                   ((newReservation.value.checkIn >= reservation.checkIn && newReservation.value.checkIn < reservation.checkOut) ||
                                    (newReservation.value.checkOut > reservation.checkIn && newReservation.value.checkOut <= reservation.checkOut) ||
                                    (newReservation.value.checkIn <= reservation.checkIn && newReservation.value.checkOut >= reservation.checkOut));
                        });

                        return !hasConflict;
                    });
                });

                // التواريخ المنسقة
                const formatDate = (dateString) => {
                    if (!dateString) return '';
                    const options = { year: 'numeric', month: 'long', day: 'numeric' };
                    return new Date(dateString).toLocaleDateString('ar-SA', options);
                };

                const formatDateTime = (dateTimeString) => {
                    if (!dateTimeString) return '';
                    const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
                    return new Date(dateTimeString).toLocaleDateString('ar-SA', options);
                };

                const formatTimeAgo = (date) => {
                    const now = new Date();
                    const diff = now - new Date(date);
                    
                    const seconds = Math.floor(diff / 1000);
                    if (seconds < 60) return 'منذ لحظات';
                    
                    const minutes = Math.floor(seconds / 60);
                    if (minutes < 60) return `منذ ${minutes} دقيقة`;
                    
                    const hours = Math.floor(minutes / 60);
                    if (hours < 24) return `منذ ${hours} ساعة`;
                    
                    const days = Math.floor(hours / 24);
                    if (days < 7) return `منذ ${days} يوم`;
                    
                    const weeks = Math.floor(days / 7);
                    if (weeks < 4) return `منذ ${weeks} أسبوع`;
                    
                    return formatDate(date);
                };

                // عناوين العرض
                const getCurrentViewTitle = () => {
                    const titles = {
                        dashboard: 'لوحة التحكم',
                        hotels: 'إدارة الفنادق',
                        rooms: 'إدارة الغرف',
                        reservations: 'إدارة الحجوزات',
                        calendar: 'تقويم الحجوزات',
                        customers: 'إدارة العملاء',
                        tasks: 'إدارة المهام',
                        reports: 'التقارير والإحصائيات'
                    };
                    return titles[currentView.value] || '';
                };

                // أنواع الفنادق
                const getHotelType = (type) => {
                    const types = {
                        '5_star': '5 نجوم',
                        '4_star': '4 نجوم',
                        '3_star': '3 نجوم',
                        'apartment': 'شقق'
                    };
                    return types[type] || type;
                };

                // أنواع الغرف
                const getRoomType = (type) => {
                    const types = {
                        'single': 'فردية',
                        'double': 'مزدوجة',
                        'suite': 'سويت',
                        'deluxe': 'ديلوكس',
                        'family': 'عائلية'
                    };
                    return types[type] || type;
                };

                // حالات الحجز
                const getReservationStatus = (status) => {
                    const statuses = {
                        'confirmed': 'مؤكد',
                        'pending': 'قيد الانتظار',
                        'cancelled': 'ملغى'
                    };
                    return statuses[status] || status;
                };

                // الحصول على رقم الطابق للغرفة
                const getRoomFloor = (roomId) => {
                    const room = rooms.value.find(r => r.id === roomId);
                    return room ? room.floor : '--';
                };

                // إدارة فلترة الطوابق
                const toggleFloorFilter = (floor) => {
                    const index = floorFilters.value.indexOf(floor);
                    if (index === -1) {
                        floorFilters.value.push(floor);
                    } else {
                        floorFilters.value.splice(index, 1);
                    }
                };

                const clearFloorFilters = () => {
                    floorFilters.value = [];
                };

                // تبديل القوائم
                const toggleNotifications = () => {
                    showNotifications.value = !showNotifications.value;
                    if (showNotifications.value) {
                        showUserMenu.value = false;
                    }
                };

                const toggleUserMenu = () => {
                    showUserMenu.value = !showUserMenu.value;
                    if (showUserMenu.value) {
                        showNotifications.value = false;
                    }
                };

                const toggleSidebar = () => {
                    const sidebar = document.querySelector('.sidebar');
                    sidebar.classList.toggle('hidden');
                };

                // تغيير العرض الحالي
                const changeView = (view) => {
                    currentView.value = view;
                    showNotifications.value = false;
                    showUserMenu.value = false;
                };

                // تسجيل الخروج
                const logout = () => {
                    if (confirm('هل أنت متأكد من تسجيل الخروج؟')) {
                        currentUser.value = null;
                        // في تطبيق حقيقي، هنا نرسل طلب تسجيل خروج للخادم
                        // ثم نوجه المستخدم إلى صفحة تسجيل الدخول
                        alert('تم تسجيل الخروج بنجاح');
                    }
                };

                // تحديد جميع الإشعارات كمقروءة
                const markAllAsRead = () => {
                    unreadNotifications.value = [];
                    showNotifications.value = false;
                };

                // تحريك البطاقات الإحصائية
                const animateStat = (index) => {
                    setTimeout(() => {
                        statsAnimated.value[index] = true;
                    }, index * 100);
                };

                // إدارة الصفحات (الحجوزات)
                const nextReservationPage = () => {
                    if (currentReservationPage.value < totalReservationPages.value) {
                        currentReservationPage.value++;
                    }
                };

                const prevReservationPage = () => {
                    if (currentReservationPage.value > 1) {
                        currentReservationPage.value--;
                    }
                };

                // حساب إجمالي الحجز
                const calculateTotal = () => {
                    if (!newReservation.value.checkIn || !newReservation.value.checkOut || !newReservation.value.roomId) {
                        reservationNights.value = 0;
                        reservationTotal.value = 0;
                        return;
                    }

                    const checkIn = new Date(newReservation.value.checkIn);
                    const checkOut = new Date(newReservation.value.checkOut);
                    const nights = Math.ceil((checkOut - checkIn) / (1000 * 60 * 60 * 24));
                    
                    const room = rooms.value.find(r => r.id == newReservation.value.roomId);
                    if (room) {
                        selectedRoomPrice.value = room.price;
                        reservationNights.value = nights;
                        reservationTotal.value = room.price * nights;
                    }
                };

                // زيادة/نقصان عدد الضيوف
                const incrementGuests = () => {
                    newReservation.value.guests++;
                };

                const decrementGuests = () => {
                    if (newReservation.value.guests > 1) {
                        newReservation.value.guests--;
                    }
                };

                // تحديث الغرف المتاحة عند تغيير الفندق أو التواريخ
                const updateAvailableRooms = () => {
                    newReservation.value.roomId = '';
                    calculateTotal();
                };

                // سحب وإسقاط المهام
                const dragStart = (taskId) => {
                    draggedTaskId.value = taskId;
                };

                const drop = (newStatus) => {
                    if (draggedTaskId.value) {
                        updateTaskStatus(draggedTaskId.value, newStatus);
                        draggedTaskId.value = null;
                    }
                };

                // تصدير البيانات
                const exportReservations = () => {
                    alert('تم تصدير بيانات الحجوزات بنجاح');
                    // في تطبيق حقيقي، هنا ننشئ ملف Excel أو PDF ونقدمه للتحميل
                };

                const exportReport = () => {
                    alert('تم تصدير التقرير بنجاح');
                    // في تطبيق حقيقي، هنا ننشئ ملف Excel أو PDF ونقدمه للتحميل
                };

                // طباعة تفاصيل الحجز
                const printReservation = () => {
                    window.print();
                };

                // ========================================
                // إدارة الفنادق (Hotels Management)
                // ========================================
                const addHotel = () => {
                    const newId = Math.max(...hotels.value.map(h => h.id)) + 1;
                    hotels.value.push({
                        id: newId,
                        ...newHotel.value,
                        image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80',
                        rooms: 0
                    });
                    showAddHotelModal.value = false;
                    resetHotelForm();
                };

                const editHotel = (hotel) => {
                    editingHotel.value = true;
                    newHotel.value = { ...hotel };
                    showAddHotelModal.value = true;
                };

                const saveHotel = () => {
                    if (editingHotel.value) {
                        const index = hotels.value.findIndex(h => h.id === newHotel.value.id);
                        if (index !== -1) {
                            hotels.value[index] = { ...newHotel.value };
                        }
                    } else {
                        addHotel();
                    }
                    closeHotelModal();
                };

                const deleteHotel = (id) => {
                    if (confirm('هل أنت متأكد من حذف هذا الفندق؟ سيتم حذف جميع الغرف والحجوزات المرتبطة به.')) {
                        hotels.value = hotels.value.filter(h => h.id !== id);
                        // حذف الغرف المرتبطة بهذا الفندق
                        rooms.value = rooms.value.filter(r => r.hotelId !== id);
                        // حذف الحجوزات المرتبطة بهذا الفندق
                        reservations.value = reservations.value.filter(r => r.hotelId !== id);
                    }
                };

                const resetHotelForm = () => {
                    newHotel.value = { name: '', location: '', type: '5_star', status: 'active', image: '', imagePreview: '' };
                };

                const closeHotelModal = () => {
                    showAddHotelModal.value = false;
                    editingHotel.value = false;
                    resetHotelForm();
                };

                // ========================================
                // إدارة الغرف (Rooms Management)
                // ========================================
                const addRoom = () => {
                    const newId = Math.max(...rooms.value.map(r => r.id)) + 1;
                    rooms.value.push({
                        id: newId,
                        ...newRoom.value,
                        image: newRoom.value.images[0] || 'https://images.unsplash.com/photo-1564078516393-cf04bd966897?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80'
                    });
                    showAddRoomModal.value = false;
                    resetRoomForm();
                };

                const editRoom = (room) => {
                    editingRoom.value = true;
                    newRoom.value = { 
                        ...room,
                        images: [room.image],
                        facilities: room.facilities ? [...room.facilities] : []
                    };
                    showAddRoomModal.value = true;
                };

                const saveRoom = () => {
                    if (editingRoom.value) {
                        const index = rooms.value.findIndex(r => r.id === newRoom.value.id);
                        if (index !== -1) {
                            rooms.value[index] = { 
                                ...newRoom.value,
                                image: newRoom.value.images[0] || 'https://images.unsplash.com/photo-1564078516393-cf04bd966897?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80'
                            };
                        }
                    } else {
                        addRoom();
                    }
                    closeRoomModal();
                };

                const deleteRoom = (id) => {
                    if (confirm('هل أنت متأكد من حذف هذه الغرفة؟')) {
                        rooms.value = rooms.value.filter(r => r.id !== id);
                        // تحديث الحجوزات المرتبطة بهذه الغرفة
                        reservations.value = reservations.value.filter(r => r.roomId !== id);
                    }
                };

                const addRoomImage = (event) => {
                    const files = event.target.files;
                    if (files) {
                        for (let i = 0; i < files.length; i++) {
                            const reader = new FileReader();
                            reader.onload = (e) => {
                                newRoom.value.images.push(e.target.result);
                            };
                            reader.readAsDataURL(files[i]);
                        }
                    }
                };

                const removeRoomImage = (index) => {
                    newRoom.value.images.splice(index, 1);
                };

                const resetRoomForm = () => {
                    newRoom.value = { 
                        number: '', 
                        floor: 1, 
                        type: 'single', 
                        price: 80000, 
                        capacity: 1, 
                        size: 30, 
                        view: 'city', 
                        status: 'available', 
                        description: '', 
                        images: [], 
                        facilities: [] 
                    };
                };

                const closeRoomModal = () => {
                    showAddRoomModal.value = false;
                    editingRoom.value = false;
                    resetRoomForm();
                };

                // ========================================
                // إدارة الحجوزات (Reservations Management)
                // ========================================
                const addReservation = () => {
                    const newId = Math.max(...reservations.value.map(r => r.id)) + 1;
                    const room = rooms.value.find(r => r.id == newReservation.value.roomId);
                    const hotel = hotels.value.find(h => h.id == newReservation.value.hotelId);
                    
                    if (!room || !hotel) return;

                    const reservation = {
                        id: newId,
                        customerName: newReservation.value.customerName,
                        customerEmail: newReservation.value.customerEmail,
                        customerPhone: newReservation.value.customerPhone,
                        customerId: newReservation.value.customerId,
                        customerImage: 'https://randomuser.me/api/portraits/men/' + Math.floor(Math.random() * 100) + '.jpg',
                        hotel: hotel.name,
                        hotelId: hotel.id,
                        roomNumber: room.number,
                        roomId: room.id,
                        roomType: room.type,
                        checkIn: newReservation.value.checkIn,
                        checkOut: newReservation.value.checkOut,
                        nights: reservationNights.value,
                        guests: newReservation.value.guests,
                        status: 'confirmed',
                        roomPrice: room.price,
                        tax: Math.round(room.price * reservationNights.value * 0.05),
                        total: room.price * reservationNights.value * 1.05,
                        notes: newReservation.value.notes,
                        createdAt: new Date().toISOString()
                    };
                    
                    reservations.value.push(reservation);
                    
                    // تحديث حالة الغرفة
                    room.status = 'booked';
                    
                    closeReservationModal();
                    
                    // إضافة إشعار
                    unreadNotifications.value.unshift({
                        id: Date.now(),
                        message: `حجز جديد لغرفة ${room.number}`,
                        date: new Date(),
                        icon: 'fa-calendar-check',
                        color: 'blue'
                    });
                };

                const editReservation = (reservation) => {
                    editingReservation.value = true;
                    newReservation.value = { 
                        customerName: reservation.customerName,
                        customerEmail: reservation.customerEmail,
                        customerPhone: reservation.customerPhone,
                        customerId: reservation.customerId,
                        hotelId: reservation.hotelId,
                        roomId: reservation.roomId,
                        checkIn: reservation.checkIn,
                        checkOut: reservation.checkOut,
                        guests: reservation.guests,
                        notes: reservation.notes
                    };
                    showAddReservationModal.value = true;
                };

                const saveReservation = () => {
                    if (editingReservation.value) {
                        // في تطبيق حقيقي، هنا نحدث الحجز الموجود
                    } else {
                        addReservation();
                    }
                };

                const viewReservation = (reservation) => {
                    viewedReservation.value = { ...reservation };
                    showViewReservationModal.value = true;
                };

                const cancelReservation = (id) => {
                    if (confirm('هل أنت متأكد من إلغاء هذا الحجز؟')) {
                        const reservation = reservations.value.find(r => r.id === id);
                        if (reservation) {
                            reservation.status = 'cancelled';
                            
                            // تحديث حالة الغرفة
                            const room = rooms.value.find(r => r.id === reservation.roomId);
                            if (room) {
                                room.status = 'available';
                            }
                            
                            // إضافة إشعار
                            unreadNotifications.value.unshift({
                                id: Date.now(),
                                message: `تم إلغاء حجز غرفة ${reservation.roomNumber}`,
                                date: new Date(),
                                icon: 'fa-calendar-times',
                                color: 'red'
                            });
                        }
                    }
                };

                const cancelViewedReservation = () => {
                    cancelReservation(viewedReservation.value.id);
                    showViewReservationModal.value = false;
                };

                const resetReservationForm = () => {
                    newReservation.value = { customerName: '', customerEmail: '', customerPhone: '', customerId: '', hotelId: '', roomId: '', checkIn: '', checkOut: '', guests: 1, notes: '' };
                    reservationNights.value = 0;
                    reservationTotal.value = 0;
                    selectedRoomPrice.value = 0;
                };

                const closeReservationModal = () => {
                    showAddReservationModal.value = false;
                    editingReservation.value = false;
                    resetReservationForm();
                };

                // ========================================
                // إدارة العملاء (Customers Management)
                // ========================================
                const addCustomer = () => {
                    const newId = Math.max(...customers.value.map(c => c.id)) + 1;
                    customers.value.push({
                        id: newId,
                        ...newCustomer.value,
                        image: newCustomer.value.imagePreview || 'https://randomuser.me/api/portraits/men/' + Math.floor(Math.random() * 100) + '.jpg',
                        reservations: 0
                    });
                    showAddCustomerModal.value = false;
                    resetCustomerForm();
                };

                const editCustomer = (customer) => {
                    editingCustomer.value = true;
                    newCustomer.value = { 
                        ...customer,
                        imagePreview: customer.image
                    };
                    showAddCustomerModal.value = true;
                };

                const saveCustomer = () => {
                    if (editingCustomer.value) {
                        const index = customers.value.findIndex(c => c.id === newCustomer.value.id);
                        if (index !== -1) {
                            customers.value[index] = { 
                                ...newCustomer.value,
                                image: newCustomer.value.imagePreview || 'https://randomuser.me/api/portraits/men/' + Math.floor(Math.random() * 100) + '.jpg'
                            };
                        }
                    } else {
                        addCustomer();
                    }
                    closeCustomerModal();
                };

                const deleteCustomer = (id) => {
                    if (confirm('هل أنت متأكد من حذف هذا العميل؟')) {
                        customers.value = customers.value.filter(c => c.id !== id);
                        // تحديث الحجوزات المرتبطة بهذا العميل
                        reservations.value = reservations.value.filter(r => r.customerId !== id);
                    }
                };

                const resetCustomerForm = () => {
                    newCustomer.value = { name: '', email: '', phone: '', idNumber: '', nationality: '', imagePreview: '' };
                };

                const closeCustomerModal = () => {
                    showAddCustomerModal.value = false;
                    editingCustomer.value = false;
                    resetCustomerForm();
                };

                // ========================================
                // إدارة المهام (Tasks Management)
                // ========================================
                const addTask = () => {
                    const newId = Math.max(...tasks.value.map(t => t.id)) + 1;
                    const assignedTo = staffMembers.value.find(s => s.id == newTask.value.assignedTo);
                    
                    tasks.value.push({
                        id: newId,
                        ...newTask.value,
                        status: 'todo',
                        assignedToName: assignedTo.name
                    });
                    
                    showAddTaskModal.value = false;
                    resetTaskForm();
                    
                    // إضافة إشعار
                    unreadNotifications.value.unshift({
                        id: Date.now(),
                        message: `مهمة جديدة: ${newTask.value.title}`,
                        date: new Date(),
                        icon: 'fa-tasks',
                        color: 'blue'
                    });
                };

                const editTask = (task) => {
                    editingTask.value = true;
                    newTask.value = { ...task };
                    showAddTaskModal.value = true;
                };

                const saveTask = () => {
                    if (editingTask.value) {
                        const index = tasks.value.findIndex(t => t.id === newTask.value.id);
                        if (index !== -1) {
                            const assignedTo = staffMembers.value.find(s => s.id == newTask.value.assignedTo);
                            tasks.value[index] = { 
                                ...newTask.value,
                                assignedToName: assignedTo.name
                            };
                        }
                    } else {
                        addTask();
                    }
                    closeTaskModal();
                };

                const updateTaskStatus = (id, status) => {
                    const task = tasks.value.find(t => t.id === id);
                    if (task) {
                        task.status = status;
                        if (status === 'done') {
                            task.completedDate = new Date().toISOString().split('T')[0];
                            
                            // إضافة إشعار
                            unreadNotifications.value.unshift({
                                id: Date.now(),
                                message: `تم إكمال المهمة: ${task.title}`,
                                date: new Date(),
                                icon: 'fa-check-circle',
                                color: 'green'
                            });
                        }
                    }
                };

                const deleteTask = (id) => {
                    tasks.value = tasks.value.filter(t => t.id !== id);
                };

                const resetTaskForm = () => {
                    newTask.value = { title: '', description: '', priority: 'medium', dueDate: '', assignedTo: 1, status: 'todo' };
                };

                const closeTaskModal = () => {
                    showAddTaskModal.value = false;
                    editingTask.value = false;
                    resetTaskForm();
                };

                // ========================================
                // تهيئة الرسوم البيانية (Charts)
                // ========================================
                const initCharts = () => {
                    // مخطط الإيرادات الشهرية
                    const revenueCtx = document.getElementById('revenueChart');
                    if (revenueCtx) {
                        new Chart(revenueCtx, {
                            type: 'line',
                            data: {
                                labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو'],
                                datasets: [{
                                    label: 'الإيرادات',
                                    data: [12000000, 19000000, 15000000, 18000000, 22000000, 25000000, 28000000],
                                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                    borderColor: 'rgba(59, 130, 246, 1)',
                                    borderWidth: 2,
                                    tension: 0.4,
                                    fill: true
                                }]
                            },
                            options: {
                                responsive: true,
                                plugins: {
                                    legend: {
                                        display: false
                                    }
                                },
                                scales: {
                                    y: {
                                        beginAtZero: true,
                                        ticks: {
                                            callback: function(value) {
                                                return formatCurrency(value) + ' د.ع';
                                            }
                                        }
                                    }
                                }
                            }
                        });
                    }

                    // مخطط أنواع الغرف
                    const roomTypesCtx = document.getElementById('roomTypesChart');
                    if (roomTypesCtx) {
                        new Chart(roomTypesCtx, {
                            type: 'doughnut',
                            data: {
                                labels: ['فردية', 'مزدوجة', 'سويت', 'ديلوكس', 'عائلية'],
                                datasets: [{
                                    data: [15, 25, 10, 20, 30],
                                    backgroundColor: [
                                        'rgba(59, 130, 246, 0.7)',
                                        'rgba(16, 185, 129, 0.7)',
                                        'rgba(245, 158, 11, 0.7)',
                                        'rgba(139, 92, 246, 0.7)',
                                        'rgba(239, 68, 68, 0.7)'
                                    ],
                                    borderWidth: 0
                                }]
                            },
                            options: {
                                responsive: true,
                                plugins: {
                                    legend: {
                                        position: 'bottom'
                                    }
                                }
                            }
                        });
                    }

                    // مخطط إيرادات الحجوزات
                    const bookingsRevenueCtx = document.getElementById('bookingsRevenueChart');
                    if (bookingsRevenueCtx) {
                        new Chart(bookingsRevenueCtx, {
                            type: 'bar',
                            data: {
                                labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو'],
                                datasets: [{
                                    label: 'الإيرادات',
                                    data: [12000000, 19000000, 15000000, 18000000, 22000000, 25000000, 28000000],
                                    backgroundColor: 'rgba(59, 130, 246, 0.7)'
                                }]
                            },
                            options: {
                                responsive: true,
                                plugins: {
                                    legend: {
                                        display: false
                                    }
                                },
                                scales: {
                                    y: {
                                        beginAtZero: true,
                                        ticks: {
                                            callback: function(value) {
                                                return formatCurrency(value) + ' د.ع';
                                            }
                                        }
                                    }
                                }
                            }
                        });
                    }
                };

                // ========================================
                // دورة حياة التطبيق
                // ========================================
                
                // عند التحميل
                onMounted(() => {
                    // تحريك البطاقات الإحصائية
                    stats.value.forEach((_, index) => {
                        animateStat(index);
                    });

                    // تهيئة الرسوم البيانية بعد تأكيد عرضها
                    nextTick(() => {
                        if (currentView.value === 'dashboard' || currentView.value === 'reports') {
                            initCharts();
                        }
                    });
                });

                // عند تغيير العرض
                const watchView = () => {
                    nextTick(() => {
                        if (currentView.value === 'dashboard' || currentView.value === 'reports') {
                            initCharts();
                        }
                    });
                };

                // ========================================
                // إرجاع جميع المتغيرات والدوال للنموذج
                // ========================================
                return {
                    currentView,
                    currentUser,
                    showNotifications,
                    showUserMenu,
                    unreadNotifications,
                    stats,
                    statsAnimated,
                    hotels,
                    rooms,
                    reservations,
                    customers,
                    tasks,
                    staffMembers,
                    topCustomers,
                    reportPeriod,
                    showAddHotelModal,
                    showAddRoomModal,
                    showAddReservationModal,
                    showAddCustomerModal,
                    showAddTaskModal,
                    showViewReservationModal,
                    editingHotel,
                    editingRoom,
                    editingReservation,
                    editingCustomer,
                    editingTask,
                    newHotel,
                    newRoom,
                    newReservation,
                    newCustomer,
                    newTask,
                    viewedReservation,
                    reservationNights,
                    reservationTotal,
                    selectedRoomPrice,
                    hotelSearch,
                    roomSearch,
                    customerSearch,
                    reservationSearch,
                    reservationFilter,
                    reservationFilters,
                    currentReservationPage,
                    reservationsPerPage,
                    facilities,
                    floorFilters,
                    availableFloors,
                    recentReservations,
                    urgentTasks,
                    filteredHotels,
                    filteredRooms,
                    filteredCustomers,
                    filteredReservations,
                    paginatedReservations,
                    totalReservationPages,
                    availableRoomsForReservation,
                    formatDate,
                    formatDateTime,
                    formatTimeAgo,
                    formatCurrency,
                    getCurrentViewTitle,
                    getHotelType,
                    getRoomType,
                    getRoomFloor,
                    getReservationStatus,
                    toggleFloorFilter,
                    clearFloorFilters,
                    toggleNotifications,
                    toggleUserMenu,
                    toggleSidebar,
                    changeView,
                    logout,
                    markAllAsRead,
                    nextReservationPage,
                    prevReservationPage,
                    calculateTotal,
                    incrementGuests,
                    decrementGuests,
                    updateAvailableRooms,
                    dragStart,
                    drop,
                    exportReservations,
                    exportReport,
                    printReservation,
                    addHotel,
                    editHotel,
                    saveHotel,
                    deleteHotel,
                    closeHotelModal,
                    addRoom,
                    editRoom,
                    saveRoom,
                    deleteRoom,
                    addRoomImage,
                    removeRoomImage,
                    closeRoomModal,
                    addReservation,
                    editReservation,
                    saveReservation,
                    viewReservation,
                    cancelReservation,
                    cancelViewedReservation,
                    closeReservationModal,
                    addCustomer,
                    editCustomer,
                    saveCustomer,
                    deleteCustomer,
                    closeCustomerModal,
                    addTask,
                    editTask,
                    saveTask,
                    updateTaskStatus,
                    deleteTask,
                    closeTaskModal,
                    watchView
                };
            },
            watch: {
                currentView() {
                    this.watchView();
                }
            }
        }).mount('#app');
    </script>
</body>
</html>